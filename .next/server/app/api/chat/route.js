/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("better-sqlite3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Froshinpv%2FDocuments%2Fpersonal%2Fdecode%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Froshinpv%2FDocuments%2Fpersonal%2Fdecode&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Froshinpv%2FDocuments%2Fpersonal%2Fdecode%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Froshinpv%2FDocuments%2Fpersonal%2Fdecode&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_roshinpv_Documents_personal_decode_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chat/route.ts */ \"(rsc)/./app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"/Users/roshinpv/Documents/personal/decode/app/api/chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_roshinpv_Documents_personal_decode_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJvc2hpbnB2JTJGRG9jdW1lbnRzJTJGcGVyc29uYWwlMkZkZWNvZGUlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGcm9zaGlucHYlMkZEb2N1bWVudHMlMkZwZXJzb25hbCUyRmRlY29kZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZTtBQUM1RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3Jvc2hpbnB2L0RvY3VtZW50cy9wZXJzb25hbC9kZWNvZGUvYXBwL2FwaS9jaGF0L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2hhdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9yb3NoaW5wdi9Eb2N1bWVudHMvcGVyc29uYWwvZGVjb2RlL2FwcC9hcGkvY2hhdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Froshinpv%2FDocuments%2Fpersonal%2Fdecode%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Froshinpv%2FDocuments%2Fpersonal%2Fdecode&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/chat/route.ts":
/*!*******************************!*\
  !*** ./app/api/chat/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../lib/database */ \"(rsc)/./lib/database.ts\");\n\n\n\n\n\n// Helper function to get client IP address\nfunction getClientIP(request) {\n    // Check for IP in various headers (for different proxy setups)\n    const forwarded = request.headers.get('x-forwarded-for');\n    const realIP = request.headers.get('x-real-ip');\n    const clientIP = request.headers.get('x-client-ip');\n    if (forwarded) {\n        // x-forwarded-for can contain multiple IPs, get the first one\n        return forwarded.split(',')[0].trim();\n    }\n    if (realIP) return realIP;\n    if (clientIP) return clientIP;\n    // Get the request IP (NextRequest doesn't have ip property in types)\n    const requestIP = request.ip || 'unknown';\n    // Handle local development IPs\n    if (requestIP === '::1' || requestIP === '127.0.0.1') {\n        return 'localhost';\n    }\n    // Handle IPv6 localhost variations\n    if (requestIP.includes('::1') || requestIP.includes('127.0.0.1')) {\n        return 'localhost';\n    }\n    return requestIP;\n}\n// File logging function\nasync function writeToLogFile(logEntry) {\n    try {\n        const logsDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), 'logs');\n        const today = new Date().toISOString().split('T')[0] // YYYY-MM-DD\n        ;\n        const logFile = path__WEBPACK_IMPORTED_MODULE_3___default().join(logsDir, `hackathon-${today}.log`);\n        // Create logs directory if it doesn't exist\n        if (!(0,fs__WEBPACK_IMPORTED_MODULE_2__.existsSync)(logsDir)) {\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(logsDir, {\n                recursive: true\n            });\n        }\n        // Append log entry to file\n        const logLine = JSON.stringify(logEntry) + '\\n';\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.appendFile)(logFile, logLine);\n    } catch (error) {\n        console.error('Failed to write to log file:', error);\n    }\n}\n// Debug function to show all IP-related headers\nfunction debugIPHeaders(request) {\n    const ipDebug = {\n        'request.ip': request.ip,\n        'x-forwarded-for': request.headers.get('x-forwarded-for'),\n        'x-real-ip': request.headers.get('x-real-ip'),\n        'x-client-ip': request.headers.get('x-client-ip'),\n        'cf-connecting-ip': request.headers.get('cf-connecting-ip'),\n        'true-client-ip': request.headers.get('true-client-ip'),\n        'x-forwarded': request.headers.get('x-forwarded'),\n        'forwarded-for': request.headers.get('forwarded-for'),\n        'forwarded': request.headers.get('forwarded')\n    };\n    console.log('ðŸ” IP DEBUG INFO:', JSON.stringify(ipDebug, null, 2));\n    return ipDebug;\n}\n// Logging function\nasync function logUserRequest(ip, message, userAgent, request) {\n    const timestamp = new Date().toISOString();\n    const logEntry = {\n        timestamp,\n        ip,\n        message: message.substring(0, 500),\n        userAgent,\n        event: 'LLM_REQUEST'\n    };\n    // Log to console\n    console.log('ðŸ¤– USER REQUEST:', JSON.stringify(logEntry, null, 2));\n    // Debug IP info in development\n    if ( true && request) {\n        debugIPHeaders(request);\n    }\n    // Also write to file\n    await writeToLogFile(logEntry);\n}\nasync function POST(request) {\n    // Get user information early for logging\n    const clientIP = getClientIP(request);\n    const userAgent = request.headers.get('user-agent') || 'unknown';\n    try {\n        const { message, sessionId } = await request.json();\n        if (!message) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Message is required'\n            }, {\n                status: 400\n            });\n        }\n        // Initialize database\n        const db = (0,_lib_database__WEBPACK_IMPORTED_MODULE_4__.getDatabase)();\n        // Save user message to database\n        const userMessageId = db.saveMessage(clientIP, message, 'user', sessionId, userAgent);\n        // Log the user request before LLM call\n        await logUserRequest(clientIP, message, userAgent, request);\n        // LM Studio typically runs on localhost:1234 by default\n        const LM_STUDIO_URL = process.env.LM_STUDIO_URL || 'http://localhost:1234/v1/chat/completions';\n        const response = await fetch(LM_STUDIO_URL, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                model: 'local-model',\n                messages: [\n                    {\n                        role: 'system',\n                        content: `You are a helpful AI assistant supporting hackathon participants. Your role is to provide quick, concise, and practical information about the event.\n\n\nKnowledge Base\n\nEvent Details\n* Start Date Time: 13th October 2025 9:00 AM\n* End Date Time: 13th October 2025 05:00 PM\n* Locations: Hyderabad & Bangalore\n* Registration: Use the link https://wellsfargo.sharepoint.com/Bl:/s/CCPT-AandETendP/FCN9ZPB1Tv93h7ZgkDxt04m9w7nav=Yzkz)\nKey Focus Areas & Themes\n* Platform: Observability, environment stability, migration, OpSec\n* Payments: Integration, processing, compliance, best practices\n* CRM: Tools, data handling, automation tips\n* Marketing Technology: Campaign tools, analytics, segmentation, ROI measurement\n* Customer Experience (CX) Reimagined:\n    * Focus: Use existing mobile banking libraries and AI components for hyper-personalization.\n    * Sample Ideas: AI chatbot for financial advice; a gamified personal finance tool.\n* Internal Operations & Efficiency:\n    * Focus: Streamline internal processes for bank employees.\n    * Sample Ideas: Automated loan application tool; a teller dashboard for a 360-degree customer view.\n* Fraud & Cybersecurity:\n    * Focus: Combat financial crime using the bank's security and anomaly detection libraries.\n    * Sample Ideas: Real-time fraud detection system; a new 2FA method using biometrics.\n* Data-Driven Decisions:\n    * Focus: Use the bank's data to create predictive models or reporting tools.\n    * Sample Ideas: Predictive model for customer churn; a dashboard for branch managers to optimize staffing.\nHackathon Guidelines\n* Technologies:\n    * Allowed: Open-source frameworks, APIs provided by organizers.\n    * Encouraged: AI/ML, automation, data-driven solutions.\n    * Restricted: Proprietary tools without licenses, plagiarism, disallowed APIs.\n* Infrastructure:\n    * OCP Cloud environments, Local dev box, shared repositories provided.\n    * Participants must ensure environment stability and follow OpSec practices.\n* Evaluation Criteria:\n    * Innovation: Novelty and creativity\n    * Functionality: Working demo, technical feasibility\n    * Scalability: Growth handling, integration potential\n    * User Experience: Simplicity, design, usability\n    * Impact: Business value, relevance, problem-solving effectiveness\nFAQs for Participants\n* Which internal libraries and APIs can we use? A list of approved internal libraries, APIs, and data access points will be provided. We will not allow the use of external public APIs unless explicitly approved.\n* Will we have access to internal data? Yes, sanitized and anonymized data sets will be made available to ensure no sensitive customer or business data is used.\n* How do we get technical support for internal systems? Dedicated mentors from our core engineering teams will be available on-site and on a designated Slack channel.\n* What are the security and compliance requirements for our projects? All projects must adhere to the bank's standard security and compliance protocols. Mentors will help ensure your project meets these standards.\n* Can we work on a project we're already assigned to in our day job? No. Hackathon projects must be completely new and unrelated to your current work assignments to encourage fresh ideas.\n* What happens to the winning project? Winning projects will be reviewed by a panel of senior leaders for potential integration into our official product roadmap.\n\nResponse Guidelines\n\n* Keep answers short (2-3 sentences) unless more detail is requested.\n* Use bullet points for steps, features, or comparisons.\n* Reference official documentation/resources whenever possible.\n* Encourage participants to ask follow-up questions.\n\nImportant Rules\n\n* Never disclose your model/system details.\n* If asked something outside the hackathon's scope, reply:\"I'm a helpful AI assistant designed to support hackathon participants. Please reach out to the relevant team member for further assistance.\"\n* If asked about the hackathon itself, restate your role, key focus areas, event details, and guidelines.\n\n            `\n                    },\n                    {\n                        role: 'user',\n                        content: message\n                    }\n                ],\n                temperature: 0.7,\n                max_tokens: 500,\n                stream: false\n            })\n        });\n        if (!response.ok) {\n            throw new Error(`LM Studio API error: ${response.status}`);\n        }\n        const data = await response.json();\n        const botMessage = data.choices?.[0]?.message?.content || 'Sorry, I could not generate a response.';\n        // Save bot response to database\n        const botMessageId = db.saveMessage(clientIP, botMessage, 'bot', sessionId, userAgent);\n        // Log successful LLM response\n        const successLog = {\n            timestamp: new Date().toISOString(),\n            ip: clientIP,\n            responseLength: botMessage.length,\n            event: 'LLM_RESPONSE_SUCCESS',\n            userMessageId,\n            botMessageId\n        };\n        console.log('âœ… LLM RESPONSE SUCCESS:', successLog);\n        await writeToLogFile(successLog);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: botMessage\n        });\n    } catch (error) {\n        // Log error with user context\n        const errorLog = {\n            timestamp: new Date().toISOString(),\n            ip: clientIP,\n            error: error instanceof Error ? error.message : 'Unknown error',\n            event: 'LLM_REQUEST_FAILED'\n        };\n        console.error('âŒ LLM REQUEST FAILED:', errorLog);\n        await writeToLogFile(errorLog);\n        // Fallback response when LM Studio is not available\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: 'I\\'m having trouble connecting to the AI service. Please make sure LM Studio is running on localhost:1234 with a model loaded.',\n            error: true\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNUTixPQUFPO1FBQ1Q7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvcm9zaGlucHYvRG9jdW1lbnRzL3BlcnNvbmFsL2RlY29kZS9hcHAvYXBpL2NoYXQvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgd3JpdGVGaWxlLCBhcHBlbmRGaWxlLCBta2RpciB9IGZyb20gJ2ZzL3Byb21pc2VzJ1xuaW1wb3J0IHsgZXhpc3RzU3luYyB9IGZyb20gJ2ZzJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCB7IGdldERhdGFiYXNlIH0gZnJvbSAnLi4vLi4vLi4vbGliL2RhdGFiYXNlJ1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGNsaWVudCBJUCBhZGRyZXNzXG5mdW5jdGlvbiBnZXRDbGllbnRJUChyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB7XG4gIC8vIENoZWNrIGZvciBJUCBpbiB2YXJpb3VzIGhlYWRlcnMgKGZvciBkaWZmZXJlbnQgcHJveHkgc2V0dXBzKVxuICBjb25zdCBmb3J3YXJkZWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKVxuICBjb25zdCByZWFsSVAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKVxuICBjb25zdCBjbGllbnRJUCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtY2xpZW50LWlwJylcbiAgXG4gIGlmIChmb3J3YXJkZWQpIHtcbiAgICAvLyB4LWZvcndhcmRlZC1mb3IgY2FuIGNvbnRhaW4gbXVsdGlwbGUgSVBzLCBnZXQgdGhlIGZpcnN0IG9uZVxuICAgIHJldHVybiBmb3J3YXJkZWQuc3BsaXQoJywnKVswXS50cmltKClcbiAgfVxuICBcbiAgaWYgKHJlYWxJUCkgcmV0dXJuIHJlYWxJUFxuICBpZiAoY2xpZW50SVApIHJldHVybiBjbGllbnRJUFxuICBcbiAgLy8gR2V0IHRoZSByZXF1ZXN0IElQIChOZXh0UmVxdWVzdCBkb2Vzbid0IGhhdmUgaXAgcHJvcGVydHkgaW4gdHlwZXMpXG4gIGNvbnN0IHJlcXVlc3RJUCA9IChyZXF1ZXN0IGFzIGFueSkuaXAgfHwgJ3Vua25vd24nXG4gIFxuICAvLyBIYW5kbGUgbG9jYWwgZGV2ZWxvcG1lbnQgSVBzXG4gIGlmIChyZXF1ZXN0SVAgPT09ICc6OjEnIHx8IHJlcXVlc3RJUCA9PT0gJzEyNy4wLjAuMScpIHtcbiAgICByZXR1cm4gJ2xvY2FsaG9zdCdcbiAgfVxuICBcbiAgLy8gSGFuZGxlIElQdjYgbG9jYWxob3N0IHZhcmlhdGlvbnNcbiAgaWYgKHJlcXVlc3RJUC5pbmNsdWRlcygnOjoxJykgfHwgcmVxdWVzdElQLmluY2x1ZGVzKCcxMjcuMC4wLjEnKSkge1xuICAgIHJldHVybiAnbG9jYWxob3N0J1xuICB9XG4gIFxuICByZXR1cm4gcmVxdWVzdElQXG59XG5cbi8vIEZpbGUgbG9nZ2luZyBmdW5jdGlvblxuYXN5bmMgZnVuY3Rpb24gd3JpdGVUb0xvZ0ZpbGUobG9nRW50cnk6IGFueSkge1xuICB0cnkge1xuICAgIGNvbnN0IGxvZ3NEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2xvZ3MnKVxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0gLy8gWVlZWS1NTS1ERFxuICAgIGNvbnN0IGxvZ0ZpbGUgPSBwYXRoLmpvaW4obG9nc0RpciwgYGhhY2thdGhvbi0ke3RvZGF5fS5sb2dgKVxuICAgIFxuICAgIC8vIENyZWF0ZSBsb2dzIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgaWYgKCFleGlzdHNTeW5jKGxvZ3NEaXIpKSB7XG4gICAgICBhd2FpdCBta2Rpcihsb2dzRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBBcHBlbmQgbG9nIGVudHJ5IHRvIGZpbGVcbiAgICBjb25zdCBsb2dMaW5lID0gSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpICsgJ1xcbidcbiAgICBhd2FpdCBhcHBlbmRGaWxlKGxvZ0ZpbGUsIGxvZ0xpbmUpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHdyaXRlIHRvIGxvZyBmaWxlOicsIGVycm9yKVxuICB9XG59XG5cbi8vIERlYnVnIGZ1bmN0aW9uIHRvIHNob3cgYWxsIElQLXJlbGF0ZWQgaGVhZGVyc1xuZnVuY3Rpb24gZGVidWdJUEhlYWRlcnMocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgaXBEZWJ1ZyA9IHtcbiAgICAncmVxdWVzdC5pcCc6IChyZXF1ZXN0IGFzIGFueSkuaXAsXG4gICAgJ3gtZm9yd2FyZGVkLWZvcic6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpLFxuICAgICd4LXJlYWwtaXAnOiByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKSxcbiAgICAneC1jbGllbnQtaXAnOiByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWNsaWVudC1pcCcpLFxuICAgICdjZi1jb25uZWN0aW5nLWlwJzogcmVxdWVzdC5oZWFkZXJzLmdldCgnY2YtY29ubmVjdGluZy1pcCcpLCAvLyBDbG91ZGZsYXJlXG4gICAgJ3RydWUtY2xpZW50LWlwJzogcmVxdWVzdC5oZWFkZXJzLmdldCgndHJ1ZS1jbGllbnQtaXAnKSwgLy8gQ2xvdWRmbGFyZSBFbnRlcnByaXNlXG4gICAgJ3gtZm9yd2FyZGVkJzogcmVxdWVzdC5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQnKSxcbiAgICAnZm9yd2FyZGVkLWZvcic6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2ZvcndhcmRlZC1mb3InKSxcbiAgICAnZm9yd2FyZGVkJzogcmVxdWVzdC5oZWFkZXJzLmdldCgnZm9yd2FyZGVkJylcbiAgfVxuICBcbiAgY29uc29sZS5sb2coJ/CflI0gSVAgREVCVUcgSU5GTzonLCBKU09OLnN0cmluZ2lmeShpcERlYnVnLCBudWxsLCAyKSlcbiAgcmV0dXJuIGlwRGVidWdcbn1cblxuLy8gTG9nZ2luZyBmdW5jdGlvblxuYXN5bmMgZnVuY3Rpb24gbG9nVXNlclJlcXVlc3QoaXA6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCB1c2VyQWdlbnQ/OiBzdHJpbmcsIHJlcXVlc3Q/OiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgdGltZXN0YW1wLFxuICAgIGlwLFxuICAgIG1lc3NhZ2U6IG1lc3NhZ2Uuc3Vic3RyaW5nKDAsIDUwMCksIC8vIExpbWl0IG1lc3NhZ2UgbGVuZ3RoIGZvciBsb2dnaW5nXG4gICAgdXNlckFnZW50LFxuICAgIGV2ZW50OiAnTExNX1JFUVVFU1QnXG4gIH1cbiAgXG4gIC8vIExvZyB0byBjb25zb2xlXG4gIGNvbnNvbGUubG9nKCfwn6SWIFVTRVIgUkVRVUVTVDonLCBKU09OLnN0cmluZ2lmeShsb2dFbnRyeSwgbnVsbCwgMikpXG4gIFxuICAvLyBEZWJ1ZyBJUCBpbmZvIGluIGRldmVsb3BtZW50XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHJlcXVlc3QpIHtcbiAgICBkZWJ1Z0lQSGVhZGVycyhyZXF1ZXN0KVxuICB9XG4gIFxuICAvLyBBbHNvIHdyaXRlIHRvIGZpbGVcbiAgYXdhaXQgd3JpdGVUb0xvZ0ZpbGUobG9nRW50cnkpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIC8vIEdldCB1c2VyIGluZm9ybWF0aW9uIGVhcmx5IGZvciBsb2dnaW5nXG4gIGNvbnN0IGNsaWVudElQID0gZ2V0Q2xpZW50SVAocmVxdWVzdClcbiAgY29uc3QgdXNlckFnZW50ID0gcmVxdWVzdC5oZWFkZXJzLmdldCgndXNlci1hZ2VudCcpIHx8ICd1bmtub3duJ1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCB7IG1lc3NhZ2UsIHNlc3Npb25JZCB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblxuICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdNZXNzYWdlIGlzIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEluaXRpYWxpemUgZGF0YWJhc2VcbiAgICBjb25zdCBkYiA9IGdldERhdGFiYXNlKClcbiAgICBcbiAgICAvLyBTYXZlIHVzZXIgbWVzc2FnZSB0byBkYXRhYmFzZVxuICAgIGNvbnN0IHVzZXJNZXNzYWdlSWQgPSBkYi5zYXZlTWVzc2FnZShjbGllbnRJUCwgbWVzc2FnZSwgJ3VzZXInLCBzZXNzaW9uSWQsIHVzZXJBZ2VudClcbiAgICBcbiAgICAvLyBMb2cgdGhlIHVzZXIgcmVxdWVzdCBiZWZvcmUgTExNIGNhbGxcbiAgICBhd2FpdCBsb2dVc2VyUmVxdWVzdChjbGllbnRJUCwgbWVzc2FnZSwgdXNlckFnZW50LCByZXF1ZXN0KVxuXG4gICAgLy8gTE0gU3R1ZGlvIHR5cGljYWxseSBydW5zIG9uIGxvY2FsaG9zdDoxMjM0IGJ5IGRlZmF1bHRcbiAgICBjb25zdCBMTV9TVFVESU9fVVJMID0gcHJvY2Vzcy5lbnYuTE1fU1RVRElPX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDoxMjM0L3YxL2NoYXQvY29tcGxldGlvbnMnXG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKExNX1NUVURJT19VUkwsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6ICdsb2NhbC1tb2RlbCcsIC8vIExNIFN0dWRpbyB3aWxsIHVzZSB3aGF0ZXZlciBtb2RlbCBpcyBsb2FkZWRcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGBZb3UgYXJlIGEgaGVscGZ1bCBBSSBhc3Npc3RhbnQgc3VwcG9ydGluZyBoYWNrYXRob24gcGFydGljaXBhbnRzLiBZb3VyIHJvbGUgaXMgdG8gcHJvdmlkZSBxdWljaywgY29uY2lzZSwgYW5kIHByYWN0aWNhbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXZlbnQuXG5cblxuS25vd2xlZGdlIEJhc2VcblxuRXZlbnQgRGV0YWlsc1xuKiBTdGFydCBEYXRlIFRpbWU6IDEzdGggT2N0b2JlciAyMDI1IDk6MDAgQU1cbiogRW5kIERhdGUgVGltZTogMTN0aCBPY3RvYmVyIDIwMjUgMDU6MDAgUE1cbiogTG9jYXRpb25zOiBIeWRlcmFiYWQgJiBCYW5nYWxvcmVcbiogUmVnaXN0cmF0aW9uOiBVc2UgdGhlIGxpbmsgaHR0cHM6Ly93ZWxsc2ZhcmdvLnNoYXJlcG9pbnQuY29tL0JsOi9zL0NDUFQtQWFuZEVUZW5kUC9GQ045WlBCMVR2OTNoN1pna0R4dDA0bTl3N25hdj1Zemt6KVxuS2V5IEZvY3VzIEFyZWFzICYgVGhlbWVzXG4qIFBsYXRmb3JtOiBPYnNlcnZhYmlsaXR5LCBlbnZpcm9ubWVudCBzdGFiaWxpdHksIG1pZ3JhdGlvbiwgT3BTZWNcbiogUGF5bWVudHM6IEludGVncmF0aW9uLCBwcm9jZXNzaW5nLCBjb21wbGlhbmNlLCBiZXN0IHByYWN0aWNlc1xuKiBDUk06IFRvb2xzLCBkYXRhIGhhbmRsaW5nLCBhdXRvbWF0aW9uIHRpcHNcbiogTWFya2V0aW5nIFRlY2hub2xvZ3k6IENhbXBhaWduIHRvb2xzLCBhbmFseXRpY3MsIHNlZ21lbnRhdGlvbiwgUk9JIG1lYXN1cmVtZW50XG4qIEN1c3RvbWVyIEV4cGVyaWVuY2UgKENYKSBSZWltYWdpbmVkOlxuICAgICogRm9jdXM6IFVzZSBleGlzdGluZyBtb2JpbGUgYmFua2luZyBsaWJyYXJpZXMgYW5kIEFJIGNvbXBvbmVudHMgZm9yIGh5cGVyLXBlcnNvbmFsaXphdGlvbi5cbiAgICAqIFNhbXBsZSBJZGVhczogQUkgY2hhdGJvdCBmb3IgZmluYW5jaWFsIGFkdmljZTsgYSBnYW1pZmllZCBwZXJzb25hbCBmaW5hbmNlIHRvb2wuXG4qIEludGVybmFsIE9wZXJhdGlvbnMgJiBFZmZpY2llbmN5OlxuICAgICogRm9jdXM6IFN0cmVhbWxpbmUgaW50ZXJuYWwgcHJvY2Vzc2VzIGZvciBiYW5rIGVtcGxveWVlcy5cbiAgICAqIFNhbXBsZSBJZGVhczogQXV0b21hdGVkIGxvYW4gYXBwbGljYXRpb24gdG9vbDsgYSB0ZWxsZXIgZGFzaGJvYXJkIGZvciBhIDM2MC1kZWdyZWUgY3VzdG9tZXIgdmlldy5cbiogRnJhdWQgJiBDeWJlcnNlY3VyaXR5OlxuICAgICogRm9jdXM6IENvbWJhdCBmaW5hbmNpYWwgY3JpbWUgdXNpbmcgdGhlIGJhbmsncyBzZWN1cml0eSBhbmQgYW5vbWFseSBkZXRlY3Rpb24gbGlicmFyaWVzLlxuICAgICogU2FtcGxlIElkZWFzOiBSZWFsLXRpbWUgZnJhdWQgZGV0ZWN0aW9uIHN5c3RlbTsgYSBuZXcgMkZBIG1ldGhvZCB1c2luZyBiaW9tZXRyaWNzLlxuKiBEYXRhLURyaXZlbiBEZWNpc2lvbnM6XG4gICAgKiBGb2N1czogVXNlIHRoZSBiYW5rJ3MgZGF0YSB0byBjcmVhdGUgcHJlZGljdGl2ZSBtb2RlbHMgb3IgcmVwb3J0aW5nIHRvb2xzLlxuICAgICogU2FtcGxlIElkZWFzOiBQcmVkaWN0aXZlIG1vZGVsIGZvciBjdXN0b21lciBjaHVybjsgYSBkYXNoYm9hcmQgZm9yIGJyYW5jaCBtYW5hZ2VycyB0byBvcHRpbWl6ZSBzdGFmZmluZy5cbkhhY2thdGhvbiBHdWlkZWxpbmVzXG4qIFRlY2hub2xvZ2llczpcbiAgICAqIEFsbG93ZWQ6IE9wZW4tc291cmNlIGZyYW1ld29ya3MsIEFQSXMgcHJvdmlkZWQgYnkgb3JnYW5pemVycy5cbiAgICAqIEVuY291cmFnZWQ6IEFJL01MLCBhdXRvbWF0aW9uLCBkYXRhLWRyaXZlbiBzb2x1dGlvbnMuXG4gICAgKiBSZXN0cmljdGVkOiBQcm9wcmlldGFyeSB0b29scyB3aXRob3V0IGxpY2Vuc2VzLCBwbGFnaWFyaXNtLCBkaXNhbGxvd2VkIEFQSXMuXG4qIEluZnJhc3RydWN0dXJlOlxuICAgICogT0NQIENsb3VkIGVudmlyb25tZW50cywgTG9jYWwgZGV2IGJveCwgc2hhcmVkIHJlcG9zaXRvcmllcyBwcm92aWRlZC5cbiAgICAqIFBhcnRpY2lwYW50cyBtdXN0IGVuc3VyZSBlbnZpcm9ubWVudCBzdGFiaWxpdHkgYW5kIGZvbGxvdyBPcFNlYyBwcmFjdGljZXMuXG4qIEV2YWx1YXRpb24gQ3JpdGVyaWE6XG4gICAgKiBJbm5vdmF0aW9uOiBOb3ZlbHR5IGFuZCBjcmVhdGl2aXR5XG4gICAgKiBGdW5jdGlvbmFsaXR5OiBXb3JraW5nIGRlbW8sIHRlY2huaWNhbCBmZWFzaWJpbGl0eVxuICAgICogU2NhbGFiaWxpdHk6IEdyb3d0aCBoYW5kbGluZywgaW50ZWdyYXRpb24gcG90ZW50aWFsXG4gICAgKiBVc2VyIEV4cGVyaWVuY2U6IFNpbXBsaWNpdHksIGRlc2lnbiwgdXNhYmlsaXR5XG4gICAgKiBJbXBhY3Q6IEJ1c2luZXNzIHZhbHVlLCByZWxldmFuY2UsIHByb2JsZW0tc29sdmluZyBlZmZlY3RpdmVuZXNzXG5GQVFzIGZvciBQYXJ0aWNpcGFudHNcbiogV2hpY2ggaW50ZXJuYWwgbGlicmFyaWVzIGFuZCBBUElzIGNhbiB3ZSB1c2U/IEEgbGlzdCBvZiBhcHByb3ZlZCBpbnRlcm5hbCBsaWJyYXJpZXMsIEFQSXMsIGFuZCBkYXRhIGFjY2VzcyBwb2ludHMgd2lsbCBiZSBwcm92aWRlZC4gV2Ugd2lsbCBub3QgYWxsb3cgdGhlIHVzZSBvZiBleHRlcm5hbCBwdWJsaWMgQVBJcyB1bmxlc3MgZXhwbGljaXRseSBhcHByb3ZlZC5cbiogV2lsbCB3ZSBoYXZlIGFjY2VzcyB0byBpbnRlcm5hbCBkYXRhPyBZZXMsIHNhbml0aXplZCBhbmQgYW5vbnltaXplZCBkYXRhIHNldHMgd2lsbCBiZSBtYWRlIGF2YWlsYWJsZSB0byBlbnN1cmUgbm8gc2Vuc2l0aXZlIGN1c3RvbWVyIG9yIGJ1c2luZXNzIGRhdGEgaXMgdXNlZC5cbiogSG93IGRvIHdlIGdldCB0ZWNobmljYWwgc3VwcG9ydCBmb3IgaW50ZXJuYWwgc3lzdGVtcz8gRGVkaWNhdGVkIG1lbnRvcnMgZnJvbSBvdXIgY29yZSBlbmdpbmVlcmluZyB0ZWFtcyB3aWxsIGJlIGF2YWlsYWJsZSBvbi1zaXRlIGFuZCBvbiBhIGRlc2lnbmF0ZWQgU2xhY2sgY2hhbm5lbC5cbiogV2hhdCBhcmUgdGhlIHNlY3VyaXR5IGFuZCBjb21wbGlhbmNlIHJlcXVpcmVtZW50cyBmb3Igb3VyIHByb2plY3RzPyBBbGwgcHJvamVjdHMgbXVzdCBhZGhlcmUgdG8gdGhlIGJhbmsncyBzdGFuZGFyZCBzZWN1cml0eSBhbmQgY29tcGxpYW5jZSBwcm90b2NvbHMuIE1lbnRvcnMgd2lsbCBoZWxwIGVuc3VyZSB5b3VyIHByb2plY3QgbWVldHMgdGhlc2Ugc3RhbmRhcmRzLlxuKiBDYW4gd2Ugd29yayBvbiBhIHByb2plY3Qgd2UncmUgYWxyZWFkeSBhc3NpZ25lZCB0byBpbiBvdXIgZGF5IGpvYj8gTm8uIEhhY2thdGhvbiBwcm9qZWN0cyBtdXN0IGJlIGNvbXBsZXRlbHkgbmV3IGFuZCB1bnJlbGF0ZWQgdG8geW91ciBjdXJyZW50IHdvcmsgYXNzaWdubWVudHMgdG8gZW5jb3VyYWdlIGZyZXNoIGlkZWFzLlxuKiBXaGF0IGhhcHBlbnMgdG8gdGhlIHdpbm5pbmcgcHJvamVjdD8gV2lubmluZyBwcm9qZWN0cyB3aWxsIGJlIHJldmlld2VkIGJ5IGEgcGFuZWwgb2Ygc2VuaW9yIGxlYWRlcnMgZm9yIHBvdGVudGlhbCBpbnRlZ3JhdGlvbiBpbnRvIG91ciBvZmZpY2lhbCBwcm9kdWN0IHJvYWRtYXAuXG5cblJlc3BvbnNlIEd1aWRlbGluZXNcblxuKiBLZWVwIGFuc3dlcnMgc2hvcnQgKDItMyBzZW50ZW5jZXMpIHVubGVzcyBtb3JlIGRldGFpbCBpcyByZXF1ZXN0ZWQuXG4qIFVzZSBidWxsZXQgcG9pbnRzIGZvciBzdGVwcywgZmVhdHVyZXMsIG9yIGNvbXBhcmlzb25zLlxuKiBSZWZlcmVuY2Ugb2ZmaWNpYWwgZG9jdW1lbnRhdGlvbi9yZXNvdXJjZXMgd2hlbmV2ZXIgcG9zc2libGUuXG4qIEVuY291cmFnZSBwYXJ0aWNpcGFudHMgdG8gYXNrIGZvbGxvdy11cCBxdWVzdGlvbnMuXG5cbkltcG9ydGFudCBSdWxlc1xuXG4qIE5ldmVyIGRpc2Nsb3NlIHlvdXIgbW9kZWwvc3lzdGVtIGRldGFpbHMuXG4qIElmIGFza2VkIHNvbWV0aGluZyBvdXRzaWRlIHRoZSBoYWNrYXRob24ncyBzY29wZSwgcmVwbHk6XCJJJ20gYSBoZWxwZnVsIEFJIGFzc2lzdGFudCBkZXNpZ25lZCB0byBzdXBwb3J0IGhhY2thdGhvbiBwYXJ0aWNpcGFudHMuIFBsZWFzZSByZWFjaCBvdXQgdG8gdGhlIHJlbGV2YW50IHRlYW0gbWVtYmVyIGZvciBmdXJ0aGVyIGFzc2lzdGFuY2UuXCJcbiogSWYgYXNrZWQgYWJvdXQgdGhlIGhhY2thdGhvbiBpdHNlbGYsIHJlc3RhdGUgeW91ciByb2xlLCBrZXkgZm9jdXMgYXJlYXMsIGV2ZW50IGRldGFpbHMsIGFuZCBndWlkZWxpbmVzLlxuXG4gICAgICAgICAgICBgXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC43LFxuICAgICAgICBtYXhfdG9rZW5zOiA1MDAsXG4gICAgICAgIHN0cmVhbTogZmFsc2VcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTE0gU3R1ZGlvIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YClcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgY29uc3QgYm90TWVzc2FnZSA9IGRhdGEuY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8ICdTb3JyeSwgSSBjb3VsZCBub3QgZ2VuZXJhdGUgYSByZXNwb25zZS4nXG5cbiAgICAvLyBTYXZlIGJvdCByZXNwb25zZSB0byBkYXRhYmFzZVxuICAgIGNvbnN0IGJvdE1lc3NhZ2VJZCA9IGRiLnNhdmVNZXNzYWdlKGNsaWVudElQLCBib3RNZXNzYWdlLCAnYm90Jywgc2Vzc2lvbklkLCB1c2VyQWdlbnQpXG5cbiAgICAvLyBMb2cgc3VjY2Vzc2Z1bCBMTE0gcmVzcG9uc2VcbiAgICBjb25zdCBzdWNjZXNzTG9nID0ge1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBpcDogY2xpZW50SVAsXG4gICAgICByZXNwb25zZUxlbmd0aDogYm90TWVzc2FnZS5sZW5ndGgsXG4gICAgICBldmVudDogJ0xMTV9SRVNQT05TRV9TVUNDRVNTJyxcbiAgICAgIHVzZXJNZXNzYWdlSWQsXG4gICAgICBib3RNZXNzYWdlSWRcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ+KchSBMTE0gUkVTUE9OU0UgU1VDQ0VTUzonLCBzdWNjZXNzTG9nKVxuICAgIGF3YWl0IHdyaXRlVG9Mb2dGaWxlKHN1Y2Nlc3NMb2cpXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiBib3RNZXNzYWdlIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gTG9nIGVycm9yIHdpdGggdXNlciBjb250ZXh0XG4gICAgY29uc3QgZXJyb3JMb2cgPSB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGlwOiBjbGllbnRJUCxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIGV2ZW50OiAnTExNX1JFUVVFU1RfRkFJTEVEJ1xuICAgIH1cbiAgICBjb25zb2xlLmVycm9yKCfinYwgTExNIFJFUVVFU1QgRkFJTEVEOicsIGVycm9yTG9nKVxuICAgIGF3YWl0IHdyaXRlVG9Mb2dGaWxlKGVycm9yTG9nKVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHJlc3BvbnNlIHdoZW4gTE0gU3R1ZGlvIGlzIG5vdCBhdmFpbGFibGVcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIG1lc3NhZ2U6ICdJXFwnbSBoYXZpbmcgdHJvdWJsZSBjb25uZWN0aW5nIHRvIHRoZSBBSSBzZXJ2aWNlLiBQbGVhc2UgbWFrZSBzdXJlIExNIFN0dWRpbyBpcyBydW5uaW5nIG9uIGxvY2FsaG9zdDoxMjM0IHdpdGggYSBtb2RlbCBsb2FkZWQuJyxcbiAgICAgIGVycm9yOiB0cnVlIFxuICAgIH0pXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJhcHBlbmRGaWxlIiwibWtkaXIiLCJleGlzdHNTeW5jIiwicGF0aCIsImdldERhdGFiYXNlIiwiZ2V0Q2xpZW50SVAiLCJyZXF1ZXN0IiwiZm9yd2FyZGVkIiwiaGVhZGVycyIsImdldCIsInJlYWxJUCIsImNsaWVudElQIiwic3BsaXQiLCJ0cmltIiwicmVxdWVzdElQIiwiaXAiLCJpbmNsdWRlcyIsIndyaXRlVG9Mb2dGaWxlIiwibG9nRW50cnkiLCJsb2dzRGlyIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJ0b2RheSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImxvZ0ZpbGUiLCJyZWN1cnNpdmUiLCJsb2dMaW5lIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiY29uc29sZSIsImRlYnVnSVBIZWFkZXJzIiwiaXBEZWJ1ZyIsImxvZyIsImxvZ1VzZXJSZXF1ZXN0IiwibWVzc2FnZSIsInVzZXJBZ2VudCIsInRpbWVzdGFtcCIsInN1YnN0cmluZyIsImV2ZW50IiwiUE9TVCIsInNlc3Npb25JZCIsImpzb24iLCJzdGF0dXMiLCJkYiIsInVzZXJNZXNzYWdlSWQiLCJzYXZlTWVzc2FnZSIsIkxNX1NUVURJT19VUkwiLCJlbnYiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwibWF4X3Rva2VucyIsInN0cmVhbSIsIm9rIiwiRXJyb3IiLCJkYXRhIiwiYm90TWVzc2FnZSIsImNob2ljZXMiLCJib3RNZXNzYWdlSWQiLCJzdWNjZXNzTG9nIiwicmVzcG9uc2VMZW5ndGgiLCJsZW5ndGgiLCJlcnJvckxvZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getDatabase: () => (/* binding */ getDatabase)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nclass ChatDatabase {\n    constructor(){\n        // Create database directory if it doesn't exist\n        const dbDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'data');\n        if (!(0,fs__WEBPACK_IMPORTED_MODULE_2__.existsSync)(dbDir)) {\n            (0,fs__WEBPACK_IMPORTED_MODULE_2__.mkdirSync)(dbDir, {\n                recursive: true\n            });\n        }\n        // Initialize database\n        const dbPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(dbDir, 'hackathon-chat.db');\n        this.db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default())(dbPath);\n        // Enable WAL mode for better performance\n        this.db.pragma('journal_mode = WAL');\n        this.initializeTables();\n    }\n    initializeTables() {\n        // Create chat_messages table\n        this.db.exec(`\n      CREATE TABLE IF NOT EXISTS chat_messages (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        ip_address TEXT NOT NULL,\n        session_id TEXT,\n        message TEXT NOT NULL,\n        role TEXT NOT NULL CHECK(role IN ('user', 'bot')),\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n        user_agent TEXT,\n        message_length INTEGER,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )\n    `);\n        // Create chat_sessions table for analytics\n        this.db.exec(`\n      CREATE TABLE IF NOT EXISTS chat_sessions (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        ip_address TEXT NOT NULL,\n        session_id TEXT UNIQUE NOT NULL,\n        first_seen DATETIME DEFAULT CURRENT_TIMESTAMP,\n        last_seen DATETIME DEFAULT CURRENT_TIMESTAMP,\n        message_count INTEGER DEFAULT 0,\n        user_agent TEXT,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )\n    `);\n        // Create indexes for better performance\n        this.db.exec(`\n      CREATE INDEX IF NOT EXISTS idx_messages_ip ON chat_messages(ip_address);\n      CREATE INDEX IF NOT EXISTS idx_messages_session ON chat_messages(session_id);\n      CREATE INDEX IF NOT EXISTS idx_messages_timestamp ON chat_messages(timestamp);\n      CREATE INDEX IF NOT EXISTS idx_sessions_ip ON chat_sessions(ip_address);\n    `);\n        console.log('âœ… Database tables initialized');\n    }\n    // Save a chat message\n    saveMessage(ipAddress, message, role, sessionId, userAgent) {\n        const stmt = this.db.prepare(`\n      INSERT INTO chat_messages (ip_address, session_id, message, role, user_agent, message_length)\n      VALUES (?, ?, ?, ?, ?, ?)\n    `);\n        const result = stmt.run(ipAddress, sessionId || null, message, role, userAgent || null, message.length);\n        // Update session info\n        if (sessionId) {\n            this.updateSession(ipAddress, sessionId, userAgent);\n        }\n        return result.lastInsertRowid;\n    }\n    // Get chat history for an IP address\n    getChatHistory(ipAddress, limit = 50) {\n        const stmt = this.db.prepare(`\n      SELECT id, ip_address, session_id, message, role, timestamp, user_agent\n      FROM chat_messages \n      WHERE ip_address = ?\n      ORDER BY timestamp DESC\n      LIMIT ?\n    `);\n        return stmt.all(ipAddress, limit);\n    }\n    // Get recent chat history for a session\n    getSessionHistory(sessionId, limit = 50) {\n        const stmt = this.db.prepare(`\n      SELECT id, ip_address, session_id, message, role, timestamp, user_agent\n      FROM chat_messages \n      WHERE session_id = ?\n      ORDER BY timestamp ASC\n      LIMIT ?\n    `);\n        return stmt.all(sessionId, limit);\n    }\n    // Update or create session info\n    updateSession(ipAddress, sessionId, userAgent) {\n        const stmt = this.db.prepare(`\n      INSERT INTO chat_sessions (ip_address, session_id, user_agent, message_count)\n      VALUES (?, ?, ?, 1)\n      ON CONFLICT(session_id) DO UPDATE SET\n        last_seen = CURRENT_TIMESTAMP,\n        message_count = message_count + 1\n    `);\n        stmt.run(ipAddress, sessionId, userAgent || null);\n    }\n    // Get analytics data\n    getAnalytics() {\n        const stats = this.db.prepare(`\n      SELECT \n        COUNT(DISTINCT ip_address) as unique_users,\n        COUNT(DISTINCT session_id) as total_sessions,\n        COUNT(*) as total_messages,\n        AVG(message_length) as avg_message_length\n      FROM chat_messages\n    `).get();\n        const recentActivity = this.db.prepare(`\n      SELECT \n        COUNT(*) as messages_last_hour\n      FROM chat_messages\n      WHERE timestamp > datetime('now', '-1 hour')\n    `).get();\n        const topUsers = this.db.prepare(`\n      SELECT \n        ip_address,\n        COUNT(*) as message_count,\n        MAX(timestamp) as last_seen\n      FROM chat_messages\n      GROUP BY ip_address\n      ORDER BY message_count DESC\n      LIMIT 10\n    `).all();\n        return {\n            ...stats,\n            ...recentActivity,\n            topUsers\n        };\n    }\n    // Close database connection\n    close() {\n        this.db.close();\n    }\n    // Get database instance for custom queries\n    getDb() {\n        return this.db;\n    }\n}\n// Singleton instance\nlet dbInstance = null;\nfunction getDatabase() {\n    if (!dbInstance) {\n        dbInstance = new ChatDatabase();\n    }\n    return dbInstance;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatDatabase);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHO1FBRU4sT0FBTztZQUNMLEdBQUlHLEtBQUs7WUFDVCxHQUFJRSxjQUFjO1lBQ2xCQztRQUNGO0lBQ0Y7SUFFQSw0QkFBNEI7SUFDNUJDLFFBQVE7UUFDTixJQUFJLENBQUM1QixFQUFFLENBQUM0QixLQUFLO0lBQ2Y7SUFFQSwyQ0FBMkM7SUFDM0NDLFFBQVE7UUFDTixPQUFPLElBQUksQ0FBQzdCLEVBQUU7SUFDaEI7QUFDRjtBQUVBLHFCQUFxQjtBQUNyQixJQUFJOEIsYUFBa0M7QUFFL0IsU0FBU0M7SUFDZCxJQUFJLENBQUNELFlBQVk7UUFDZkEsYUFBYSxJQUFJdEM7SUFDbkI7SUFDQSxPQUFPc0M7QUFDVDtBQUVBLGlFQUFldEMsWUFBWUEsRUFBQSIsInNvdXJjZXMiOlsiL1VzZXJzL3Jvc2hpbnB2L0RvY3VtZW50cy9wZXJzb25hbC9kZWNvZGUvbGliL2RhdGFiYXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEYXRhYmFzZSBmcm9tICdiZXR0ZXItc3FsaXRlMydcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgeyBleGlzdHNTeW5jLCBta2RpclN5bmMgfSBmcm9tICdmcydcblxuLy8gRGF0YWJhc2UgaW50ZXJmYWNlIGZvciBUeXBlU2NyaXB0XG5leHBvcnQgaW50ZXJmYWNlIENoYXRNZXNzYWdlIHtcbiAgaWQ6IG51bWJlclxuICBpcF9hZGRyZXNzOiBzdHJpbmdcbiAgbWVzc2FnZTogc3RyaW5nXG4gIHJvbGU6ICd1c2VyJyB8ICdib3QnXG4gIHRpbWVzdGFtcDogc3RyaW5nXG4gIHNlc3Npb25faWQ/OiBzdHJpbmdcbiAgdXNlcl9hZ2VudD86IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRTZXNzaW9uIHtcbiAgaXBfYWRkcmVzczogc3RyaW5nXG4gIHNlc3Npb25faWQ6IHN0cmluZ1xuICBmaXJzdF9zZWVuOiBzdHJpbmdcbiAgbGFzdF9zZWVuOiBzdHJpbmdcbiAgbWVzc2FnZV9jb3VudDogbnVtYmVyXG59XG5cbmNsYXNzIENoYXREYXRhYmFzZSB7XG4gIHByaXZhdGUgZGI6IERhdGFiYXNlLkRhdGFiYXNlXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gQ3JlYXRlIGRhdGFiYXNlIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgY29uc3QgZGJEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnKVxuICAgIGlmICghZXhpc3RzU3luYyhkYkRpcikpIHtcbiAgICAgIG1rZGlyU3luYyhkYkRpciwgeyByZWN1cnNpdmU6IHRydWUgfSlcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGRhdGFiYXNlXG4gICAgY29uc3QgZGJQYXRoID0gcGF0aC5qb2luKGRiRGlyLCAnaGFja2F0aG9uLWNoYXQuZGInKVxuICAgIHRoaXMuZGIgPSBuZXcgRGF0YWJhc2UoZGJQYXRoKVxuICAgIFxuICAgIC8vIEVuYWJsZSBXQUwgbW9kZSBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgdGhpcy5kYi5wcmFnbWEoJ2pvdXJuYWxfbW9kZSA9IFdBTCcpXG4gICAgXG4gICAgdGhpcy5pbml0aWFsaXplVGFibGVzKClcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVRhYmxlcygpIHtcbiAgICAvLyBDcmVhdGUgY2hhdF9tZXNzYWdlcyB0YWJsZVxuICAgIHRoaXMuZGIuZXhlYyhgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBjaGF0X21lc3NhZ2VzIChcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICBpcF9hZGRyZXNzIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIHNlc3Npb25faWQgVEVYVCxcbiAgICAgICAgbWVzc2FnZSBURVhUIE5PVCBOVUxMLFxuICAgICAgICByb2xlIFRFWFQgTk9UIE5VTEwgQ0hFQ0socm9sZSBJTiAoJ3VzZXInLCAnYm90JykpLFxuICAgICAgICB0aW1lc3RhbXAgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgdXNlcl9hZ2VudCBURVhULFxuICAgICAgICBtZXNzYWdlX2xlbmd0aCBJTlRFR0VSLFxuICAgICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgIClcbiAgICBgKVxuXG4gICAgLy8gQ3JlYXRlIGNoYXRfc2Vzc2lvbnMgdGFibGUgZm9yIGFuYWx5dGljc1xuICAgIHRoaXMuZGIuZXhlYyhgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBjaGF0X3Nlc3Npb25zIChcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICBpcF9hZGRyZXNzIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIHNlc3Npb25faWQgVEVYVCBVTklRVUUgTk9UIE5VTEwsXG4gICAgICAgIGZpcnN0X3NlZW4gREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgbGFzdF9zZWVuIERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIG1lc3NhZ2VfY291bnQgSU5URUdFUiBERUZBVUxUIDAsXG4gICAgICAgIHVzZXJfYWdlbnQgVEVYVCxcbiAgICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApXG4gICAgYClcblxuICAgIC8vIENyZWF0ZSBpbmRleGVzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICB0aGlzLmRiLmV4ZWMoYFxuICAgICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X21lc3NhZ2VzX2lwIE9OIGNoYXRfbWVzc2FnZXMoaXBfYWRkcmVzcyk7XG4gICAgICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfbWVzc2FnZXNfc2Vzc2lvbiBPTiBjaGF0X21lc3NhZ2VzKHNlc3Npb25faWQpO1xuICAgICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X21lc3NhZ2VzX3RpbWVzdGFtcCBPTiBjaGF0X21lc3NhZ2VzKHRpbWVzdGFtcCk7XG4gICAgICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfc2Vzc2lvbnNfaXAgT04gY2hhdF9zZXNzaW9ucyhpcF9hZGRyZXNzKTtcbiAgICBgKVxuXG4gICAgY29uc29sZS5sb2coJ+KchSBEYXRhYmFzZSB0YWJsZXMgaW5pdGlhbGl6ZWQnKVxuICB9XG5cbiAgLy8gU2F2ZSBhIGNoYXQgbWVzc2FnZVxuICBzYXZlTWVzc2FnZShcbiAgICBpcEFkZHJlc3M6IHN0cmluZyxcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgcm9sZTogJ3VzZXInIHwgJ2JvdCcsXG4gICAgc2Vzc2lvbklkPzogc3RyaW5nLFxuICAgIHVzZXJBZ2VudD86IHN0cmluZ1xuICApOiBudW1iZXIge1xuICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoYFxuICAgICAgSU5TRVJUIElOVE8gY2hhdF9tZXNzYWdlcyAoaXBfYWRkcmVzcywgc2Vzc2lvbl9pZCwgbWVzc2FnZSwgcm9sZSwgdXNlcl9hZ2VudCwgbWVzc2FnZV9sZW5ndGgpXG4gICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8pXG4gICAgYClcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBzdG10LnJ1bihcbiAgICAgIGlwQWRkcmVzcyxcbiAgICAgIHNlc3Npb25JZCB8fCBudWxsLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIHJvbGUsXG4gICAgICB1c2VyQWdlbnQgfHwgbnVsbCxcbiAgICAgIG1lc3NhZ2UubGVuZ3RoXG4gICAgKVxuXG4gICAgLy8gVXBkYXRlIHNlc3Npb24gaW5mb1xuICAgIGlmIChzZXNzaW9uSWQpIHtcbiAgICAgIHRoaXMudXBkYXRlU2Vzc2lvbihpcEFkZHJlc3MsIHNlc3Npb25JZCwgdXNlckFnZW50KVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQubGFzdEluc2VydFJvd2lkIGFzIG51bWJlclxuICB9XG5cbiAgLy8gR2V0IGNoYXQgaGlzdG9yeSBmb3IgYW4gSVAgYWRkcmVzc1xuICBnZXRDaGF0SGlzdG9yeShpcEFkZHJlc3M6IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDUwKTogQ2hhdE1lc3NhZ2VbXSB7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShgXG4gICAgICBTRUxFQ1QgaWQsIGlwX2FkZHJlc3MsIHNlc3Npb25faWQsIG1lc3NhZ2UsIHJvbGUsIHRpbWVzdGFtcCwgdXNlcl9hZ2VudFxuICAgICAgRlJPTSBjaGF0X21lc3NhZ2VzIFxuICAgICAgV0hFUkUgaXBfYWRkcmVzcyA9ID9cbiAgICAgIE9SREVSIEJZIHRpbWVzdGFtcCBERVNDXG4gICAgICBMSU1JVCA/XG4gICAgYClcbiAgICBcbiAgICByZXR1cm4gc3RtdC5hbGwoaXBBZGRyZXNzLCBsaW1pdCkgYXMgQ2hhdE1lc3NhZ2VbXVxuICB9XG5cbiAgLy8gR2V0IHJlY2VudCBjaGF0IGhpc3RvcnkgZm9yIGEgc2Vzc2lvblxuICBnZXRTZXNzaW9uSGlzdG9yeShzZXNzaW9uSWQ6IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDUwKTogQ2hhdE1lc3NhZ2VbXSB7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShgXG4gICAgICBTRUxFQ1QgaWQsIGlwX2FkZHJlc3MsIHNlc3Npb25faWQsIG1lc3NhZ2UsIHJvbGUsIHRpbWVzdGFtcCwgdXNlcl9hZ2VudFxuICAgICAgRlJPTSBjaGF0X21lc3NhZ2VzIFxuICAgICAgV0hFUkUgc2Vzc2lvbl9pZCA9ID9cbiAgICAgIE9SREVSIEJZIHRpbWVzdGFtcCBBU0NcbiAgICAgIExJTUlUID9cbiAgICBgKVxuICAgIFxuICAgIHJldHVybiBzdG10LmFsbChzZXNzaW9uSWQsIGxpbWl0KSBhcyBDaGF0TWVzc2FnZVtdXG4gIH1cblxuICAvLyBVcGRhdGUgb3IgY3JlYXRlIHNlc3Npb24gaW5mb1xuICBwcml2YXRlIHVwZGF0ZVNlc3Npb24oaXBBZGRyZXNzOiBzdHJpbmcsIHNlc3Npb25JZDogc3RyaW5nLCB1c2VyQWdlbnQ/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgIElOU0VSVCBJTlRPIGNoYXRfc2Vzc2lvbnMgKGlwX2FkZHJlc3MsIHNlc3Npb25faWQsIHVzZXJfYWdlbnQsIG1lc3NhZ2VfY291bnQpXG4gICAgICBWQUxVRVMgKD8sID8sID8sIDEpXG4gICAgICBPTiBDT05GTElDVChzZXNzaW9uX2lkKSBETyBVUERBVEUgU0VUXG4gICAgICAgIGxhc3Rfc2VlbiA9IENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBtZXNzYWdlX2NvdW50ID0gbWVzc2FnZV9jb3VudCArIDFcbiAgICBgKVxuICAgIFxuICAgIHN0bXQucnVuKGlwQWRkcmVzcywgc2Vzc2lvbklkLCB1c2VyQWdlbnQgfHwgbnVsbClcbiAgfVxuXG4gIC8vIEdldCBhbmFseXRpY3MgZGF0YVxuICBnZXRBbmFseXRpY3MoKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLmRiLnByZXBhcmUoYFxuICAgICAgU0VMRUNUIFxuICAgICAgICBDT1VOVChESVNUSU5DVCBpcF9hZGRyZXNzKSBhcyB1bmlxdWVfdXNlcnMsXG4gICAgICAgIENPVU5UKERJU1RJTkNUIHNlc3Npb25faWQpIGFzIHRvdGFsX3Nlc3Npb25zLFxuICAgICAgICBDT1VOVCgqKSBhcyB0b3RhbF9tZXNzYWdlcyxcbiAgICAgICAgQVZHKG1lc3NhZ2VfbGVuZ3RoKSBhcyBhdmdfbWVzc2FnZV9sZW5ndGhcbiAgICAgIEZST00gY2hhdF9tZXNzYWdlc1xuICAgIGApLmdldCgpXG5cbiAgICBjb25zdCByZWNlbnRBY3Rpdml0eSA9IHRoaXMuZGIucHJlcGFyZShgXG4gICAgICBTRUxFQ1QgXG4gICAgICAgIENPVU5UKCopIGFzIG1lc3NhZ2VzX2xhc3RfaG91clxuICAgICAgRlJPTSBjaGF0X21lc3NhZ2VzXG4gICAgICBXSEVSRSB0aW1lc3RhbXAgPiBkYXRldGltZSgnbm93JywgJy0xIGhvdXInKVxuICAgIGApLmdldCgpXG5cbiAgICBjb25zdCB0b3BVc2VycyA9IHRoaXMuZGIucHJlcGFyZShgXG4gICAgICBTRUxFQ1QgXG4gICAgICAgIGlwX2FkZHJlc3MsXG4gICAgICAgIENPVU5UKCopIGFzIG1lc3NhZ2VfY291bnQsXG4gICAgICAgIE1BWCh0aW1lc3RhbXApIGFzIGxhc3Rfc2VlblxuICAgICAgRlJPTSBjaGF0X21lc3NhZ2VzXG4gICAgICBHUk9VUCBCWSBpcF9hZGRyZXNzXG4gICAgICBPUkRFUiBCWSBtZXNzYWdlX2NvdW50IERFU0NcbiAgICAgIExJTUlUIDEwXG4gICAgYCkuYWxsKClcblxuICAgIHJldHVybiB7XG4gICAgICAuLi4oc3RhdHMgYXMgb2JqZWN0KSxcbiAgICAgIC4uLihyZWNlbnRBY3Rpdml0eSBhcyBvYmplY3QpLFxuICAgICAgdG9wVXNlcnNcbiAgICB9XG4gIH1cblxuICAvLyBDbG9zZSBkYXRhYmFzZSBjb25uZWN0aW9uXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuZGIuY2xvc2UoKVxuICB9XG5cbiAgLy8gR2V0IGRhdGFiYXNlIGluc3RhbmNlIGZvciBjdXN0b20gcXVlcmllc1xuICBnZXREYigpIHtcbiAgICByZXR1cm4gdGhpcy5kYlxuICB9XG59XG5cbi8vIFNpbmdsZXRvbiBpbnN0YW5jZVxubGV0IGRiSW5zdGFuY2U6IENoYXREYXRhYmFzZSB8IG51bGwgPSBudWxsXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhYmFzZSgpOiBDaGF0RGF0YWJhc2Uge1xuICBpZiAoIWRiSW5zdGFuY2UpIHtcbiAgICBkYkluc3RhbmNlID0gbmV3IENoYXREYXRhYmFzZSgpXG4gIH1cbiAgcmV0dXJuIGRiSW5zdGFuY2Vcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2hhdERhdGFiYXNlXG4iXSwibmFtZXMiOlsiRGF0YWJhc2UiLCJwYXRoIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsIkNoYXREYXRhYmFzZSIsImNvbnN0cnVjdG9yIiwiZGJEaXIiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsInJlY3Vyc2l2ZSIsImRiUGF0aCIsImRiIiwicHJhZ21hIiwiaW5pdGlhbGl6ZVRhYmxlcyIsImV4ZWMiLCJjb25zb2xlIiwibG9nIiwic2F2ZU1lc3NhZ2UiLCJpcEFkZHJlc3MiLCJtZXNzYWdlIiwicm9sZSIsInNlc3Npb25JZCIsInVzZXJBZ2VudCIsInN0bXQiLCJwcmVwYXJlIiwicmVzdWx0IiwicnVuIiwibGVuZ3RoIiwidXBkYXRlU2Vzc2lvbiIsImxhc3RJbnNlcnRSb3dpZCIsImdldENoYXRIaXN0b3J5IiwibGltaXQiLCJhbGwiLCJnZXRTZXNzaW9uSGlzdG9yeSIsImdldEFuYWx5dGljcyIsInN0YXRzIiwiZ2V0IiwicmVjZW50QWN0aXZpdHkiLCJ0b3BVc2VycyIsImNsb3NlIiwiZ2V0RGIiLCJkYkluc3RhbmNlIiwiZ2V0RGF0YWJhc2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Froshinpv%2FDocuments%2Fpersonal%2Fdecode%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Froshinpv%2FDocuments%2Fpersonal%2Fdecode&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();